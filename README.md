# GO - 基于 Monad 区块链的一元购平台

一个基于 Monad 区块链的去中心化众筹抽奖平台，用户可以用很少的资金参与高价值商品的抽奖。

## 项目特点

- 🎯 **公平透明**：基于区块链的随机算法，确保抽奖公平性
- 💰 **低门槛参与**：用户只需少量资金即可参与高价值商品抽奖
- ⏰ **时间保障**：未达到目标金额自动退款
- 🔒 **资金安全**：智能合约管理，自动执行规则
- 🌐 **去中心化**：无需后端服务器，直接与区块链交互

## 系统架构

```
┌─────────────────┐              ┌─────────────────┐
│   前端 DApp     │◄────────────►│   智能合约      │
│   (React)       │              │   (Solidity)    │
└─────────────────┘              └─────────────────┘
         │                                │
         │                                │
         └────────────┐          ┌────────┘
                      │          │
              ┌─────────────────┐
              │   Monad 区块链  │
              └─────────────────┘
```

## 核心功能

1. **项目创建**：管理员创建众筹项目
2. **用户参与**：用户购买抽奖券参与
3. **自动抽奖**：达到目标金额后按投资比例随机抽奖
4. **自动退款**：时间到期未达目标自动退款
5. **钱包连接**：支持MetaMask等以太坊钱包

## 技术栈

- **智能合约**：Solidity + OpenZeppelin
- **前端界面**：React + TypeScript
- **区块链交互**：ethers.js
- **区块链**：Monad
- **样式框架**：Tailwind CSS
- **构建工具**：Vite

## 快速开始

### 环境要求

- Node.js >= 18.0.0
- npm 或 yarn
- MetaMask 浏览器插件

### 安装依赖

```bash
npm install
```

### 本地开发

1. **创建环境变量文件**：
```bash
# 创建 .env.local 文件并添加以下内容：
VITE_CONTRACT_ADDRESS=0x5FbDB2315678afecb367f032d93F642f64180aa3
```

2. **启动本地区块链节点**：
```bash
npx hardhat node
```

3. **部署智能合约**：
```bash
npx hardhat run scripts/deploy.js --network localhost
```
   部署完成后，将输出的合约地址更新到 `.env.local` 文件中。

4. **启动前端开发服务器**：
```bash
npm run dev
```

5. **配置MetaMask**：
   - 网络名称: localhost
   - RPC URL: http://127.0.0.1:8545
   - Chain ID: 31337
   - 货币符号: ETH

### 项目结构

```
Go/
├── contracts/                 # 智能合约
│   └── YuanGouLottery.sol
├── scripts/                   # 部署脚本
│   └── deploy.js
├── src/                       # 前端源码
│   ├── components/            # React 组件
│   ├── contexts/              # React Context
│   ├── hooks/                 # 自定义 Hooks
│   ├── pages/                 # 页面组件
│   ├── styles/                # 样式文件
│   └── contracts/             # 合约 ABI
├── hardhat.config.js          # Hardhat 配置
├── vite.config.ts             # Vite 配置
└── package.json
```

## 使用指南

### 管理员功能

1. **创建项目**：只有合约所有者可以创建新的众筹项目
2. **设置参数**：配置项目名称、描述、目标金额、抽奖券价格等
3. **手动抽奖**：在项目完成但未自动抽奖时手动触发

### 用户功能

1. **浏览项目**：查看所有活跃的众筹项目
2. **购买抽奖券**：参与感兴趣的项目
3. **查看我的项目**：管理已参与的项目
4. **自动退款**：项目失败时自动获得退款

### 智能合约功能

- **自动抽奖**：达到目标金额时自动执行抽奖
- **自动退款**：项目过期未达标时支持退款
- **透明随机**：基于区块链的伪随机数生成
- **资金安全**：合约托管，自动执行规则

## 部署到 Monad

1. **配置网络**：在 `hardhat.config.js` 中配置 Monad 网络参数
2. **设置私钥**：创建 `.env` 文件并设置部署私钥
3. **部署合约**：
```bash
npx hardhat run scripts/deploy.js --network monad
```
4. **更新前端配置**：将合约地址添加到环境变量中

## 安全考虑

- 智能合约使用 OpenZeppelin 库确保安全性
- 实现重入攻击保护
- 权限控制确保只有管理员可以创建项目
- 资金托管避免单点故障

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request 来改进项目！
